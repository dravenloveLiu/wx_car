<!--pages/auth/auth.wxml-->
<view class="container">
  <view class="auth-section">
    <block wx:if="{{!hasUserInfo}}">
      <view class="header">
        <image class="logo" src="/images/logo.png" mode="aspectFit"></image>
        <text class="title">汽车保养维修</text>
        <text class="subtitle">为您的爱车提供专业服务</text>
      </view>
      <button class="auth-btn" 
              bindtap="getUserProfile"
              wx:if="{{canIUseGetUserProfile}}">
        微信授权登录
      </button>
    </block>

    <block wx:if="{{showInfoForm}}">
      <view class="form-section">
        <view class="form-header">
          <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
          <text class="nickname">{{userInfo.nickName}}</text>
        </view>

        <view class="form-group">
          <view class="form-item">
            <text class="label">姓名</text>
            <input class="input" 
                   type="text"
                   placeholder="请输入真实姓名"
                   data-field="name"
                   bindinput="inputChange" />
          </view>

          <view class="form-item">
            <text class="label">手机号</text>
            <input class="input" 
                   type="number"
                   maxlength="11"
                   placeholder="请输入手机号"
                   data-field="phone"
                   bindinput="inputChange" />
          </view>

          <view class="form-item">
            <text class="label">车辆信息</text>
            <input class="input" 
                   type="text"
                   placeholder="请输入车型/车牌号"
                   data-field="carInfo"
                   bindinput="inputChange" />
          </view>
        </view>

        <button class="submit-btn" bindtap="submitUserInfo">确认提交</button>
      </view>
    </block>
  </view>
</view>