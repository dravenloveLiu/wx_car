<view class="container">
  <!-- æœç´¢æ¡† -->
  <view class="search-header">
    <view class="search-input-wrap">
      <icon type="search" size="16" color="#999"></icon>
      <input class="search-input" 
             placeholder="æœç´¢æœåŠ¡ã€è½®èƒã€é…ä»¶" 
             value="{{keyword}}"
             bindinput="onInput"
             bindconfirm="doSearch"
             confirm-type="search"
             focus="true"
             />
      <icon wx:if="{{keyword}}" 
            bindtap="clearInput" 
            type="clear" 
            size="16" 
            color="#999"></icon>
    </view>
    <view class="search-btn" bindtap="doSearch">æœç´¢</view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <block wx:if="{{keyword && results.length > 0}}">
    <view class="search-result">
      <view class="result-list">
        <view class="result-item" 
              wx:for="{{results}}" 
              wx:key="id"
              bindtap="tapResult"
              data-item="{{item}}">
          <view class="result-icon {{item.type}}">
            <text>{{item.type === 'service' ? 'æœ' : item.type === 'tire' ? 'è½®' : 'ä»¶'}}</text>
          </view>
          <view class="result-info">
            <view class="result-name">{{item.name}}</view>
            <view class="result-desc">{{item.desc || item.spec}}</view>
          </view>
          <view class="result-price">Â¥{{item.price}}</view>
        </view>
      </view>
    </view>
  </block>

  <!-- æ— æœç´¢ç»“æœ -->
  <view class="no-result" wx:elif="{{keyword && !searching && results.length === 0}}">
    <view class="no-result-icon">ğŸ”</view>
    <view class="no-result-text">æœªæ‰¾åˆ°ç›¸å…³ç»“æœ</view>
  </view>

  <!-- æœç´¢å†å²å’Œçƒ­é—¨æœç´¢ -->
  <block wx:elif="{{!keyword}}">
    <!-- æœç´¢å†å² -->
    <view class="search-section" wx:if="{{historySearches.length > 0}}">
      <view class="section-header">
        <view class="section-title">æœç´¢å†å²</view>
        <view class="clear-history" bindtap="clearHistory">æ¸…ç©º</view>
      </view>
      <view class="tag-list">
        <view class="tag-item" 
              wx:for="{{historySearches}}" 
              wx:key="*this"
              bindtap="tapSearch"
              data-keyword="{{item}}">
          {{item}}
        </view>
      </view>
    </view>

    <!-- çƒ­é—¨æœç´¢ -->
    <view class="search-section">
      <view class="section-header">
        <view class="section-title">çƒ­é—¨æœç´¢</view>
      </view>
      <view class="tag-list">
        <view class="tag-item" 
              wx:for="{{hotSearches}}" 
              wx:key="*this"
              bindtap="tapSearch"
              data-keyword="{{item}}">
          {{item}}
        </view>
      </view>
    </view>
  </block>

  <!-- æœç´¢ä¸­Loading -->
  <view class="searching-container" wx:if="{{searching}}">
    <view class="searching">
      <view class="searching-icon"></view>
      <view class="searching-text">æœç´¢ä¸­...</view>
    </view>
  </view>
</view> 